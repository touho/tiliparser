{"version":3,"sources":["default.js"],"names":[],"mappings":"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","file":"default-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.visitor = undefined;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _babelHelperGetFunctionArity = require(\"babel-helper-get-function-arity\");\n\nvar _babelHelperGetFunctionArity2 = _interopRequireDefault(_babelHelperGetFunctionArity);\n\nvar _babelHelperCallDelegate = require(\"babel-helper-call-delegate\");\n\nvar _babelHelperCallDelegate2 = _interopRequireDefault(_babelHelperCallDelegate);\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar buildDefaultParam = (0, _babelTemplate2.default)(\"\\n  let VARIABLE_NAME =\\n    ARGUMENTS.length > ARGUMENT_KEY && ARGUMENTS[ARGUMENT_KEY] !== undefined ?\\n      ARGUMENTS[ARGUMENT_KEY]\\n    :\\n      DEFAULT_VALUE;\\n\");\n\nvar buildCutOff = (0, _babelTemplate2.default)(\"\\n  let $0 = $1[$2];\\n\");\n\nfunction hasDefaults(node) {\n  for (var _iterator = node.params, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var param = _ref;\n\n    if (!t.isIdentifier(param)) return true;\n  }\n  return false;\n}\n\nvar iifeVisitor = {\n  ReferencedIdentifier: function ReferencedIdentifier(path, state) {\n    var name = path.node.name;\n    if (name === \"eval\" || path.scope.hasOwnBinding(name) && path.scope.getOwnBinding(name).kind !== \"param\") {\n      state.iife = true;\n      path.stop();\n    }\n  },\n  Scope: function Scope(path) {\n    path.skip();\n  }\n};\n\nvar visitor = exports.visitor = {\n  Function: function Function(path) {\n    var node = path.node;\n    var scope = path.scope;\n\n    if (!hasDefaults(node)) return;\n\n    path.ensureBlock();\n\n    var state = {\n      iife: false,\n      scope: scope\n    };\n\n    var body = [];\n\n    var argsIdentifier = t.identifier(\"arguments\");\n    argsIdentifier._shadowedFunctionLiteral = path;\n\n    function pushDefNode(left, right, i) {\n      var defNode = buildDefaultParam({\n        VARIABLE_NAME: left,\n        DEFAULT_VALUE: right,\n        ARGUMENT_KEY: t.numericLiteral(i),\n        ARGUMENTS: argsIdentifier\n      });\n      defNode._blockHoist = node.params.length - i;\n      body.push(defNode);\n    }\n\n    var lastNonDefaultParam = (0, _babelHelperGetFunctionArity2.default)(node);\n\n    var params = path.get(\"params\");\n    for (var i = 0; i < params.length; i++) {\n      var param = params[i];\n\n      if (!param.isAssignmentPattern()) {\n        if (!state.iife && !param.isIdentifier()) {\n          param.traverse(iifeVisitor, state);\n        }\n\n        continue;\n      }\n\n      var left = param.get(\"left\");\n      var right = param.get(\"right\");\n\n      if (i >= lastNonDefaultParam || left.isPattern()) {\n        var placeholder = scope.generateUidIdentifier(\"x\");\n        placeholder._isDefaultPlaceholder = true;\n        node.params[i] = placeholder;\n      } else {\n        node.params[i] = left.node;\n      }\n\n      if (!state.iife) {\n        if (right.isIdentifier() && scope.hasOwnBinding(right.node.name) && scope.getOwnBinding(right.node.name).kind !== \"param\") {\n          state.iife = true;\n        } else {\n          right.traverse(iifeVisitor, state);\n        }\n      }\n\n      pushDefNode(left.node, right.node, i);\n    }\n\n    for (var _i2 = lastNonDefaultParam + 1; _i2 < node.params.length; _i2++) {\n      var _param = node.params[_i2];\n      if (_param._isDefaultPlaceholder) continue;\n\n      var declar = buildCutOff(_param, argsIdentifier, t.numericLiteral(_i2));\n      declar._blockHoist = node.params.length - _i2;\n      body.push(declar);\n    }\n\n    node.params = node.params.slice(0, lastNonDefaultParam);\n\n    if (state.iife) {\n      body.push((0, _babelHelperCallDelegate2.default)(path, scope));\n      path.set(\"body\", t.blockStatement(body));\n    } else {\n      path.get(\"body\").unshiftContainer(\"body\", body);\n    }\n  }\n};"]}