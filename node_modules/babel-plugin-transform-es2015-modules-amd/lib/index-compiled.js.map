{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["/*istanbul ignore next*/\"use strict\";\n\nexports.__esModule = true;\n\nvar _create = require(\"babel-runtime/core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nexports.default = function ( /*istanbul ignore next*/_ref) {\n  /*istanbul ignore next*/var t = _ref.types;\n\n  function isValidRequireCall(path) {\n    if (!path.isCallExpression()) return false;\n    if (!path.get(\"callee\").isIdentifier({ name: \"require\" })) return false;\n    if (path.scope.getBinding(\"require\")) return false;\n\n    var args = path.get(\"arguments\");\n    if (args.length !== 1) return false;\n\n    var arg = args[0];\n    if (!arg.isStringLiteral()) return false;\n\n    return true;\n  }\n\n  var amdVisitor = { /*istanbul ignore next*/\n    ReferencedIdentifier: function ReferencedIdentifier(_ref2) {\n      /*istanbul ignore next*/var node = _ref2.node;\n      /*istanbul ignore next*/var scope = _ref2.scope;\n\n      if (node.name === \"exports\" && !scope.getBinding(\"exports\")) {\n        this.hasExports = true;\n      }\n\n      if (node.name === \"module\" && !scope.getBinding(\"module\")) {\n        this.hasModule = true;\n      }\n    },\n    /*istanbul ignore next*/CallExpression: function CallExpression(path) {\n      if (!isValidRequireCall(path)) return;\n      this.bareSources.push(path.node.arguments[0]);\n      path.remove();\n    },\n    /*istanbul ignore next*/VariableDeclarator: function VariableDeclarator(path) {\n      var id = path.get(\"id\");\n      if (!id.isIdentifier()) return;\n\n      var init = path.get(\"init\");\n      if (!isValidRequireCall(init)) return;\n\n      var source = init.node.arguments[0];\n      this.sourceNames[source.value] = true;\n      this.sources.push([id.node, source]);\n\n      path.remove();\n    }\n  };\n\n  return {\n    inherits: require(\"babel-plugin-transform-es2015-modules-commonjs\"),\n\n    /*istanbul ignore next*/pre: function pre() {\n      // source strings\n      this.sources = [];\n      this.sourceNames = /*istanbul ignore next*/(0, _create2.default)(null);\n\n      // bare sources\n      this.bareSources = [];\n\n      this.hasExports = false;\n      this.hasModule = false;\n    },\n\n\n    visitor: {\n      Program: { /*istanbul ignore next*/\n        exit: function exit(path) {\n          /*istanbul ignore next*/\n          var _this = this;\n\n          if (this.ran) return;\n          this.ran = true;\n\n          path.traverse(amdVisitor, this);\n\n          var params = this.sources.map(function (source) /*istanbul ignore next*/{\n            return source[0];\n          });\n          var sources = this.sources.map(function (source) /*istanbul ignore next*/{\n            return source[1];\n          });\n\n          sources = sources.concat(this.bareSources.filter(function (str) {\n            return ! /*istanbul ignore next*/_this.sourceNames[str.value];\n          }));\n\n          var moduleName = this.getModuleName();\n          if (moduleName) moduleName = t.stringLiteral(moduleName);\n\n          if (this.hasExports) {\n            sources.unshift(t.stringLiteral(\"exports\"));\n            params.unshift(t.identifier(\"exports\"));\n          }\n\n          if (this.hasModule) {\n            sources.unshift(t.stringLiteral(\"module\"));\n            params.unshift(t.identifier(\"module\"));\n          }\n\n          /*istanbul ignore next*/var node = path.node;\n\n          var factory = buildFactory({\n            PARAMS: params,\n            BODY: node.body\n          });\n          factory.expression.body.directives = node.directives;\n          node.directives = [];\n\n          node.body = [buildDefine({\n            MODULE_NAME: moduleName,\n            SOURCES: sources,\n            FACTORY: factory\n          })];\n        }\n      }\n    }\n  };\n};\n\nvar /*istanbul ignore next*/_babelTemplate = require(\"babel-template\");\n\n/*istanbul ignore next*/\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar buildDefine = /*istanbul ignore next*/(0, _babelTemplate2.default)( /*istanbul ignore next*/\"\\n  define(MODULE_NAME, [SOURCES], FACTORY);\\n\");\n\nvar buildFactory = /*istanbul ignore next*/(0, _babelTemplate2.default)( /*istanbul ignore next*/\"\\n  (function (PARAMS) {\\n    BODY;\\n  })\\n\");\n\n/*istanbul ignore next*/module.exports = exports[\"default\"];"]}